#! /bin/bash

# build the string
for f in $(ls */*.go | grep -v _test.go)
do
  if [ -f $f ] ; then
    s+=$(cat $f | grep -B1 'Endpoint =')
    #if [[ -n "$s" ]] ; then
    #  "echo $s" | sed 's@--@\n\n@g'
    #fi
  fi
done

# clean up the string out output
s=${s//\`/\"}  # replace all instances of tick mark with double quotes
s=${s//--/}    # remove the double dashes the cat put in sometimes
s=${s/\/\/ /""}  # strips first set of // without creating a new line for it
s=${s//\/\//$'\n'}
s=${s//$'\t'/""}
s=${s//$'\n' /$'\n'}
s=${s//$'\n'$'\n'$'\n'/$'\n'}
s=${s//$'\n'$'\n'/$'\n'}
#s=$s/\s*|\s*/|/g;
echo "$s"

#echo -e ${s//\/\/ /\\n}
